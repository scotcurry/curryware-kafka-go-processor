package jsonhandlers

import (
	"encoding/base64"
	"testing"
)

func TestParseLeagueStatInfo(t *testing.T) {

	leagueStatInfo := `[{"LeagueStatKey":4493606174,"StatId":4,"StatEnabled":true,"StatName":"Passing Yards","StatDisplayName":"Pass Yds","StatGroup":"passing","StatAbbreviation":"Yds","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":4493606175,"StatId":5,"StatEnabled":true,"StatName":"Passing Touchdowns","StatDisplayName":"Pass TD","StatGroup":"passing","StatAbbreviation":"TD","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":4493606176,"StatId":6,"StatEnabled":true,"StatName":"Interceptions","StatDisplayName":"Int","StatGroup":"passing","StatAbbreviation":"Int","StatSortOrder":0,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":4493606178,"StatId":8,"StatEnabled":true,"StatName":"Rushing Attempts","StatDisplayName":"Rush Att","StatGroup":"rushing","StatAbbreviation":"Att","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":4493606179,"StatId":9,"StatEnabled":true,"StatName":"Rushing Yards","StatDisplayName":"Rush Yds","StatGroup":"rushing","StatAbbreviation":"Yds","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061710,"StatId":10,"StatEnabled":true,"StatName":"Rushing Touchdowns","StatDisplayName":"Rush TD","StatGroup":"rushing","StatAbbreviation":"TD","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061711,"StatId":11,"StatEnabled":true,"StatName":"Receptions","StatDisplayName":"Rec","StatGroup":"receiving","StatAbbreviation":"Rec","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061712,"StatId":12,"StatEnabled":true,"StatName":"Receiving Yards","StatDisplayName":"Rec Yds","StatGroup":"receiving","StatAbbreviation":"Yds","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061713,"StatId":13,"StatEnabled":true,"StatName":"Receiving Touchdowns","StatDisplayName":"Rec TD","StatGroup":"receiving","StatAbbreviation":"TD","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061716,"StatId":16,"StatEnabled":true,"StatName":"2-Point Conversions","StatDisplayName":"2-PT","StatGroup":"misc","StatAbbreviation":"2-PT","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061718,"StatId":18,"StatEnabled":true,"StatName":"Fumbles Lost","StatDisplayName":"Fum Lost","StatGroup":"fumbles","StatAbbreviation":"Lost","StatSortOrder":0,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061778,"StatId":78,"StatEnabled":true,"StatName":"Targets","StatDisplayName":"Targets","StatGroup":"receiving","StatAbbreviation":"Targets","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061757,"StatId":57,"StatEnabled":true,"StatName":"Offensive Fumble Return TD","StatDisplayName":"Fum Ret TD","StatGroup":"misc","StatAbbreviation":"Off Fumb TD","StatSortOrder":1,"StatPositionType":"O","StatSortPostion":0},{"LeagueStatKey":44936061719,"StatId":19,"StatEnabled":true,"StatName":"Field Goals 0-19 Yards","StatDisplayName":"FG 0-19","StatGroup":"fgs","StatAbbreviation":"0-19 Yds","StatSortOrder":1,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061720,"StatId":20,"StatEnabled":true,"StatName":"Field Goals 20-29 Yards","StatDisplayName":"FG 20-29","StatGroup":"fgs","StatAbbreviation":"20-29 Yds","StatSortOrder":1,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061721,"StatId":21,"StatEnabled":true,"StatName":"Field Goals 30-39 Yards","StatDisplayName":"FG 30-39","StatGroup":"fgs","StatAbbreviation":"30-39 Yds","StatSortOrder":1,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061722,"StatId":22,"StatEnabled":true,"StatName":"Field Goals 40-49 Yards","StatDisplayName":"FG 40-49","StatGroup":"fgs","StatAbbreviation":"40-49 Yds","StatSortOrder":1,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061723,"StatId":23,"StatEnabled":true,"StatName":"Field Goals 50+ Yards","StatDisplayName":"FG 50+","StatGroup":"fgs","StatAbbreviation":"50+ Yds","StatSortOrder":1,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061724,"StatId":24,"StatEnabled":true,"StatName":"Field Goals Missed 0-19 Yards","StatDisplayName":"FGM 0-19","StatGroup":"fgm","StatAbbreviation":"0-19 Yds","StatSortOrder":0,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061725,"StatId":25,"StatEnabled":true,"StatName":"Field Goals Missed 20-29 Yards","StatDisplayName":"FGM 20-29","StatGroup":"fgm","StatAbbreviation":"20-29 Yds","StatSortOrder":0,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061726,"StatId":26,"StatEnabled":true,"StatName":"Field Goals Missed 30-39 Yards","StatDisplayName":"FGM 30-39","StatGroup":"fgm","StatAbbreviation":"30-39 Yds","StatSortOrder":0,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061727,"StatId":27,"StatEnabled":true,"StatName":"Field Goals Missed 40-49 Yards","StatDisplayName":"FGM 40-49","StatGroup":"fgm","StatAbbreviation":"40-49 Yds","StatSortOrder":0,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061728,"StatId":28,"StatEnabled":true,"StatName":"Field Goals Missed 50+ Yards","StatDisplayName":"FGM 50+","StatGroup":"fgm","StatAbbreviation":"50+ Yds","StatSortOrder":0,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061729,"StatId":29,"StatEnabled":true,"StatName":"Point After Attempt Made","StatDisplayName":"PAT Made","StatGroup":"pat","StatAbbreviation":"Made","StatSortOrder":1,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061730,"StatId":30,"StatEnabled":true,"StatName":"Point After Attempt Missed","StatDisplayName":"PAT Miss","StatGroup":"pat","StatAbbreviation":"Miss","StatSortOrder":0,"StatPositionType":"K","StatSortPostion":0},{"LeagueStatKey":44936061731,"StatId":31,"StatEnabled":true,"StatName":"Points Allowed","StatDisplayName":"Pts Allow","StatGroup":"none","StatAbbreviation":"Pts vs.","StatSortOrder":0,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061732,"StatId":32,"StatEnabled":true,"StatName":"Sack","StatDisplayName":"Sack","StatGroup":"team_tackles","StatAbbreviation":"Sack","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061733,"StatId":33,"StatEnabled":true,"StatName":"Interception","StatDisplayName":"Int","StatGroup":"def_turnovers","StatAbbreviation":"Int","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061734,"StatId":34,"StatEnabled":true,"StatName":"Fumble Recovery","StatDisplayName":"Fum Rec","StatGroup":"def_turnovers","StatAbbreviation":"Fum Rec","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061735,"StatId":35,"StatEnabled":true,"StatName":"Touchdown","StatDisplayName":"TD","StatGroup":"tds","StatAbbreviation":"TD","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061736,"StatId":36,"StatEnabled":true,"StatName":"Safety","StatDisplayName":"Safe","StatGroup":"team_tackles","StatAbbreviation":"Safe","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061737,"StatId":37,"StatEnabled":true,"StatName":"Block Kick","StatDisplayName":"Blk Kick","StatGroup":"misc","StatAbbreviation":"Blk Kick","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061749,"StatId":49,"StatEnabled":true,"StatName":"Kickoff and Punt Return Touchdowns","StatDisplayName":"Ret TD","StatGroup":"return","StatAbbreviation":"TD","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061750,"StatId":50,"StatEnabled":true,"StatName":"Points Allowed 0 points","StatDisplayName":"Pts Allow 0","StatGroup":"pts_allow","StatAbbreviation":"0 Pts","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061751,"StatId":51,"StatEnabled":true,"StatName":"Points Allowed 1-6 points","StatDisplayName":"Pts Allow 1-6","StatGroup":"pts_allow","StatAbbreviation":"1-6 Pts","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061752,"StatId":52,"StatEnabled":true,"StatName":"Points Allowed 7-13 points","StatDisplayName":"Pts Allow 7-13","StatGroup":"pts_allow","StatAbbreviation":"7-13 Pts","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061753,"StatId":53,"StatEnabled":true,"StatName":"Points Allowed 14-20 points","StatDisplayName":"Pts Allow 14-20","StatGroup":"pts_allow","StatAbbreviation":"14-20 Pts","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061754,"StatId":54,"StatEnabled":true,"StatName":"Points Allowed 21-27 points","StatDisplayName":"Pts Allow 21-27","StatGroup":"pts_allow","StatAbbreviation":"21-27 Pts","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061755,"StatId":55,"StatEnabled":true,"StatName":"Points Allowed 28-34 points","StatDisplayName":"Pts Allow 28-34","StatGroup":"pts_allow","StatAbbreviation":"28-34 Pts","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061756,"StatId":56,"StatEnabled":true,"StatName":"Points Allowed 35+ points","StatDisplayName":"Pts Allow 35+","StatGroup":"pts_allow","StatAbbreviation":"35+ Pts","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0},{"LeagueStatKey":44936061782,"StatId":82,"StatEnabled":true,"StatName":"Extra Point Returned","StatDisplayName":"XPR","StatGroup":"misc","StatAbbreviation":"XPR","StatSortOrder":1,"StatPositionType":"DT","StatSortPostion":0}]`
	leagueStatInfo = base64.StdEncoding.EncodeToString([]byte(leagueStatInfo))
	leagueStatInfoTestResult := ParsLeagueStatInfo(leagueStatInfo)

	if leagueStatInfoTestResult[0].LeagueStatId != 4493606174 {
		t.Errorf("Expected 33500, got %d", leagueStatInfoTestResult[0].LeagueStatId)
	}

	t.Log("Test passed")
}
